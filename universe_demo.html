<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>The Evolution of Sound</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>
<header>
    <h1>The Evolution of Sound</h1>
    <h2>Visualizing 30 Years of Pop Culture Through Data</h2>
</header>

<div id="universe-vis-container" style="display: flex; gap: 20px; align-items: flex-start; max-width: 100%; padding: 0 20px;">
    <div id="universe-vis" style="flex: 1; min-width: 0;"></div>
    <div style="padding: 15px; background: #f5f5f5; border-radius: 5px; width: 200px; flex-shrink: 0;">
        <label for="color-feature" style="font-weight: bold; display: block; margin-bottom: 10px;">Color by:</label>
        <select id="color-feature" style="padding: 8px; font-size: 14px; border-radius: 3px; border: 1px solid #ccc; width: 100%; margin-bottom: 15px; box-sizing: border-box;">
            <option value="none" selected>None (Grey)</option>
            <option value="energy">Energy</option>
            <option value="danceability">Danceability</option>
            <option value="valence">Valence</option>
            <option value="acousticness">Acousticness</option>
            <option value="instrumentalness">Instrumentalness</option>
            <option value="speechiness">Speechiness</option>
            <option value="liveness">Liveness</option>
            <option value="loudness">Loudness</option>
            <option value="key">Key</option>
            <option value="mode">Mode</option>
        </select>
        
        <label for="genre-filter" style="font-weight: bold; display: block; margin-bottom: 10px;">Filter by Genre:</label>
        <input type="text" id="genre-filter" placeholder="Search genres..." style="padding: 8px; font-size: 14px; border-radius: 3px; border: 1px solid #ccc; width: 100%; margin-bottom: 5px; box-sizing: border-box;">
        <div id="genre-suggestions" style="max-height: 150px; overflow-y: auto; background: white; border: 1px solid #ccc; border-radius: 3px; display: none;"></div>
        <button id="clear-genre" style="padding: 6px 12px; font-size: 12px; border-radius: 3px; border: 1px solid #ccc; background: white; width: 100%; margin-top: 5px; cursor: pointer; display: none; box-sizing: border-box;">Clear Filter</button>
    </div>
</div>

<!-- PCA Loading Vectors Section -->
<div id="pca-loadings-section" style="max-width: 800px; margin: 4rem auto; padding: 0 20px; text-align: center;">
    <h3 style="font-size: 1.8rem; margin-bottom: 1rem; color: #222;">Understanding the Space: PCA Loading Vectors</h3>
    <p style="font-size: 1rem; color: #555; margin-bottom: 1.5rem;">
        You may have noticed that certain audio features seem to increase in specific directions. 
        These are the <strong>PCA loading vectors</strong>—arrows showing how each musical characteristic 
        maps onto our 3D space. Feel free to scroll back up and verify!
    </p>
    <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 1rem;">
        <input type="checkbox" id="show-loadings" style="width: 18px; height: 18px; cursor: pointer;">
        <label for="show-loadings" style="font-size: 1rem; cursor: pointer; user-select: none;">
            Show Loading Vectors
        </label>
    </div>
</div>

<footer>
    <p>Created by ___ • Data Source: Spotify, Kaggle Global Music Charts</p>
</footer>

<!-- JS Scripts -->
<script src="js/vis_universe.js"></script>
</body>
</html>
